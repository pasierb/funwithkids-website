---
import Layout from "~/layouts/Layout.astro";
import Header from '~/components/widgets/Header.astro';
import { headerData } from '~/navigation';
import { SpotsMap } from '~/components/widgets/spots/SpotsMap';
import { SpotsList } from '~/components/widgets/spots/SpotsList';
import { SpotsFilterBar } from '~/components/widgets/spots/SpotsFilterBar';
---

<script>
  import { getSpots } from '~/services/spotsService';
  import { $allSpots } from '~/stores/spots.store';

  getSpots().then(spots => {
    $allSpots.set(spots);
  });
</script>

<Layout>
  <div class="h-screen flex flex-col">
    <Header {...headerData} />

    <div class="border-b border-gray-200 px-8">
      <SpotsFilterBar client:only="react" />
    </div>

    <div class="grow flex flex-row">
      <div class="lg:w-1/3">
        <SpotsList client:only="react" />
      </div>
      <div class="grow flex flex-col">
        <SpotsMap client:only="react" className="grow" />
      </div>
    </div>
  <div>


</Layout>
